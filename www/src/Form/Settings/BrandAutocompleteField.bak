<?php

namespace App\Form\Search;

use App\Entity\SettingBrand;
use App\Repository\SettingBrandRepository;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolver;
use Symfony\UX\Autocomplete\Form\AsEntityAutocompleteField;
use Symfony\UX\Autocomplete\Form\ParentEntityAutocompleteType;

#[AsEntityAutocompleteField]
class settingBrandAutocompleteField extends AbstractType
{
	public function configureOptions(OptionsResolver $resolver): void
	{
		$resolver->setDefaults([
			'choice_label'      => 'name',
			'class'             => SettingBrand::class,
			'label'             => 'Select a Brand',
			'multiple'          => false,
		    'placeholder'       => 'Select a Brand',
			'query_builder'     => function(SettingBrandRepository $repository) {
				return $repository->createQueryBuilder('settingBrand');
			},
			'required'          => false,
			'searchable_fields' => ['name'],
            //'security'        => 'ROLE_SOMETHING',
		]);
	}

	public function getParent(): string
	{
		return ParentEntityAutocompleteType::class;
	}
}
